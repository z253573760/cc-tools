(("undefined"!==typeof self?self:this)["webpackJsonpvue_tools"]=("undefined"!==typeof self?self:this)["webpackJsonpvue_tools"]||[]).push([[3],{"5eab":function(e,t,r){"use strict";var n=r("ec65"),i=r.n(n);i.a},dacc:function(e,t,r){"use strict";r.r(t);r("7f7f");var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"cc-uploader-warpper"},[r("div",{staticClass:"cc-file-list-warpper"},[r("transition-group",{staticClass:"cc-file-list-item-warpper",attrs:{name:"list-complete"}},[r("div",{key:"cc-uploader",staticClass:"cc-file-list-item"},[this.fileList.length<e.limit?r("div",{staticClass:"cc-file-uploader-warpper",style:e.style},[r("input",{staticClass:"cc-file-uploader",attrs:{accept:e.accept,type:"file"},on:{change:e.handlerUpload}}),r("div",{staticClass:"cc-upload"},[r("div",{staticClass:"add-icon"},[e._v("+")]),e.text?r("div",{staticStyle:{"font-size":"12px"},domProps:{textContent:e._s(e.text)}}):e._e()])]):e._e()]),e._l(e.fileList,function(t,n){return r("div",{key:t.uuid,staticClass:"cc-file-list-item"},[r("div",{staticClass:"cc-file-list-item-img-warpper",style:e.style},[r("div",{staticClass:"cc-file-action-warpper"},[r("i",{staticClass:"el-icon-view",on:{click:function(t){return e.preview(n)}}}),r("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.remove(n)}}})]),100===t.percentage?r("transition",{attrs:{name:"fade"}},[r("img",{attrs:{src:t.url,alt:t.uuid}})]):r("transition",{attrs:{name:"fade"}},[r("div",{staticClass:"progress-warpper"},[r("Progress",{attrs:{type:"circle",width:e.width-10,percentage:t.percentage}})],1)])],1)])})],2)],1)])])},i=[],a=r("75fc"),c=r("cebc"),s=(r("96cf"),r("3b8d")),u=(r("c5f6"),r("5c96")),l=r("2d2d"),o=r("612d"),p=r("1fb8"),f=r("3d0b"),d=r("bc3a"),h=r.n(d),b=h.a.create();function v(e,t){return g.apply(this,arguments)}function g(){return g=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var n,i,a,c,s,u=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:function(){},i=new FormData,a=Object(o["e"])(),c="".concat(r.dir).concat(a),i.append("OSSAccessKeyId",r.app_id),i.append("name",a),i.append("policy",r.policy),i.append("Signature",r.signature),i.append("key",c),i.append("region",r.region),i.append("dir",r.dir),i.append("success_action_status","200"),i.append("file",t,a),s="".concat(r.showurl,"/").concat(c),e.prev=14,e.next=17,b.post(r.showurl,i,{onUploadProgress:n});case 17:return e.abrupt("return",{uuid:a,url:s,err:null});case 20:return e.prev=20,e.t0=e["catch"](14),console.log("上传OSS失败",e.t0),e.abrupt("return",{err:e.t0});case 24:case"end":return e.stop()}},e,null,[[14,20]])})),g.apply(this,arguments)}var m={name:"CcUploader",components:{Progress:u["Progress"]},props:{text:{type:String,default:""},width:{type:[Number,String],default:100},list:{type:Array,default:function(){return[]}},accept:{type:String,default:".jpg,.jpeg,.png"},limit:{type:Number,default:6},ossOpts:{type:Object,default:null},beforeUpload:{type:Function,default:function(){return!0}},beforeRemove:{type:Function,default:function(){return!0}},onPreview:{type:Function,default:function(){}},onSuccess:{type:Function,default:function(){}},onError:{type:Function,default:function(){}}},data:function(){return{fileList:[]}},created:function(){this.init()},computed:{style:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.width,"px")}}},methods:{init:function(){this.fileList=this.list.map(function(e){return{uuid:Object(o["e"])(),percentage:100,url:e}})},remove:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.beforeRemove(Object(c["a"])({},this.fileList[t]),t);case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return");case 5:this.fileList.splice(t,1);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),preview:function(e){var t=this.fileList[e];this.onPreview(Object(c["a"])({},t),e)},handlerBeforeUpload:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.beforeUpload(t);case 3:if(r=e.sent,!Object(p["c"])(r)){e.next=6;break}return e.abrupt("return",r);case 6:return Object(f["a"])("beforeUpload 返回的结果不是一个有效的file对象"),e.abrupt("return",!1);case 10:return e.prev=10,e.t0=e["catch"](0),Object(f["a"])("beforeUolader ".concat(e.t0)),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));function t(t){return e.apply(this,arguments)}return t}(),handlerUpload:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r,n,i,c,s,u,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target.files,n=r[0],t.target.value="",e.next=5,this.handlerBeforeUpload(n);case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:if(this.ossOpts){e.next=10;break}return e.abrupt("return");case 10:return c=Object(o["e"])(),this.fileList=[].concat(Object(a["a"])(this.fileList),[{uuid:c,url:"",percentage:0}]),e.next=14,this.$nextTick();case 14:return e.next=16,v(i,this.ossOpts,function(e){var t=e.loaded/e.total*60|0;p.fileList[p.fileList.length-1].percentage=t});case 16:if(s=e.sent,!s.err){e.next=21;break}return this.onError(s.err,i),setTimeout(function(){p.fileList.pop()},2e3),e.abrupt("return");case 21:u=setInterval(function(){p.fileList[p.fileList.length-1].percentage>=95?clearInterval(u):p.fileList[p.fileList.length-1].percentage=p.fileList[p.fileList.length-1].percentage+1},500),Object(l["b"])(s.url,function(){clearInterval(u),p.fileList[p.fileList.length-1].url=s.url,p.fileList[p.fileList.length-1].percentage=100,p.onSuccess(s.url,i)});case 23:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},w=m,y=(r("5eab"),r("2877")),x=Object(y["a"])(w,n,i,!1,null,"502db7bd",null),L=x.exports;L.install=function(e){e.component(L.name,L)};t["default"]=L},ec65:function(e,t,r){}}]);
//# sourceMappingURL=vue-tools.umd.min.3.js.map