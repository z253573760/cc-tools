{"version":3,"sources":["webpack://vue-tools/./packages/components/uploader/src/uploader.vue?c894","webpack://vue-tools/./packages/components/uploader/src/uploader.vue?843c","webpack://vue-tools/./packages/utils/aliOss.js","webpack://vue-tools/packages/components/uploader/src/uploader.vue","webpack://vue-tools/./packages/components/uploader/src/uploader.vue?9087","webpack://vue-tools/./packages/components/uploader/src/uploader.vue","webpack://vue-tools/./packages/components/uploader/index.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_uploader_vue_vue_type_style_index_0_id_502db7bd_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_uploader_vue_vue_type_style_index_0_id_502db7bd_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","name","key","fileList","length","limit","style","accept","type","on","change","handlerUpload","_v","staticStyle","font-size","domProps","textContent","_s","text","_e","_l","item","index","uuid","click","$event","preview","remove","percentage","src","url","alt","width","staticRenderFns","axios","$axios","create","ossUpload","_x","_x2","_ossUpload","apply","arguments","_callee","file","ossOpts","cb","request","result","_args","regeneratorRuntime","wrap","_context","prev","next","undefined","FormData","generateUUID","concat","dir","append","app_id","policy","signature","region","showurl","post","onUploadProgress","abrupt","err","t0","console","log","stop","uploadervue_type_script_lang_js_","components","Progress","element_ui_common","props","String","default","Number","list","Array","Object","beforeUpload","Function","beforeRemove","onPreview","onSuccess","onError","data","created","init","computed","height","methods","map","_","tools","_remove","asyncToGenerator","mark","canRemove","objectSpread","sent","splice","handlerBeforeUpload","_handlerBeforeUpload","_callee2","_context2","_handlerUpload","_callee3","e","files","fileBeforeUpload","timer","_this","_context3","target","value","toConsumableArray","$nextTick","progressEvent","complete","loaded","total","setTimeout","pop","setInterval","clearInterval","img","_x3","src_uploadervue_type_script_lang_js_","component","componentNormalizer","uploader","CcUploader","install","Vue"],"mappings":"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","file":"vue-tools.umd.min.3.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploader.vue?vue&type=style&index=0&id=502db7bd&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploader.vue?vue&type=style&index=0&id=502db7bd&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"cc-uploader-warpper\"},[_c('div',{staticClass:\"cc-file-list-warpper\"},[_c('transition-group',{staticClass:\"cc-file-list-item-warpper\",attrs:{\"name\":\"list-complete\"}},[_c('div',{key:\"cc-uploader\",staticClass:\"cc-file-list-item\"},[(this.fileList.length < _vm.limit)?_c('div',{staticClass:\"cc-file-uploader-warpper\",style:(_vm.style)},[_c('input',{staticClass:\"cc-file-uploader\",attrs:{\"accept\":_vm.accept,\"type\":\"file\"},on:{\"change\":_vm.handlerUpload}}),_c('div',{staticClass:\"cc-upload\"},[_c('div',{staticClass:\"add-icon\"},[_vm._v(\"+\")]),(_vm.text)?_c('div',{staticStyle:{\"font-size\":\"12px\"},domProps:{\"textContent\":_vm._s(_vm.text)}}):_vm._e()])]):_vm._e()]),_vm._l((_vm.fileList),function(item,index){return _c('div',{key:item.uuid,staticClass:\"cc-file-list-item\"},[_c('div',{staticClass:\"cc-file-list-item-img-warpper\",style:(_vm.style)},[_c('div',{staticClass:\"cc-file-action-warpper\"},[_c('i',{staticClass:\"el-icon-view\",on:{\"click\":function($event){return _vm.preview(index)}}}),_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){return _vm.remove(index)}}})]),(item.percentage === 100)?_c('transition',{attrs:{\"name\":\"fade\"}},[_c('img',{attrs:{\"src\":item.url,\"alt\":item.uuid}})]):_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"progress-warpper\"},[_c('Progress',{attrs:{\"type\":\"circle\",\"width\":_vm.width - 10,\"percentage\":item.percentage}})],1)])],1)])})],2)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import $axios from \"axios\";\nimport { generateUUID } from \"./tools\";\nconst axios = $axios.create();\nexport async function ossUpload(file, ossOpts, cb = () => {}) {\n  const request = new FormData();\n  const uuid = generateUUID();\n  const src = `${ossOpts.dir}${uuid}`;\n  request.append(\"OSSAccessKeyId\", ossOpts.app_id); // Bucket 拥有者的Access Key Id。\n  request.append(\"name\", uuid);\n  request.append(\"policy\", ossOpts.policy); // policy规定了请求的表单域的合法性\n  request.append(\"Signature\", ossOpts.signature); // 根据Access Key Secret和policy计算的签名信息，OSS验证该签名信息从而验证该Post请求的合法性\n  request.append(\"key\", src); // 文件名字，可设置路径\n  request.append(\"region\", ossOpts.region);\n  request.append(\"dir\", ossOpts.dir);\n  request.append(\"success_action_status\", \"200\"); // 让服务端返回200,不然，默认会返回204\n  request.append(\"file\", file, uuid);\n  const result = `${ossOpts.showurl}/${src}`;\n  try {\n    await axios.post(ossOpts.showurl, request, {\n      onUploadProgress: cb\n    });\n    return {\n      uuid,\n      url: result,\n      err: null\n    };\n  } catch (err) {\n    console.log(\"上传OSS失败\", err);\n    return {\n      err\n    };\n  }\n}\n","<template>\n  <div>\n    <div class=\"cc-uploader-warpper\">\n      <div class=\"cc-file-list-warpper\">\n        <transition-group\n          name=\"list-complete\"\n          class=\"cc-file-list-item-warpper\"\n        >\n          <div key=\"cc-uploader\" class=\"cc-file-list-item\">\n            <div\n              class=\"cc-file-uploader-warpper\"\n              :style=\"style\"\n              v-if=\"this.fileList.length < limit\"\n            >\n              <input\n                class=\"cc-file-uploader\"\n                :accept=\"accept\"\n                @change=\"handlerUpload\"\n                type=\"file\"\n              />\n              <div class=\"cc-upload\">\n                <div class=\"add-icon\">+</div>\n                <div v-if=\"text\" style=\"font-size:12px\" v-text=\"text\"></div>\n              </div>\n            </div>\n          </div>\n          <div\n            v-for=\"(item, index) in fileList\"\n            :key=\"item.uuid\"\n            class=\"cc-file-list-item\"\n          >\n            <div class=\"cc-file-list-item-img-warpper\" :style=\"style\">\n              <div class=\"cc-file-action-warpper\">\n                <i class=\"el-icon-view\" @click=\"preview(index)\" />\n                <i class=\"el-icon-delete\" @click=\"remove(index)\" />\n              </div>\n              <transition name=\"fade\" v-if=\"item.percentage === 100\">\n                <img :src=\"item.url\" :alt=\"item.uuid\" />\n              </transition>\n              <transition name=\"fade\" v-else>\n                <div class=\"progress-warpper\">\n                  <Progress\n                    type=\"circle\"\n                    :width=\"width - 10\"\n                    :percentage=\"item.percentage\"\n                  />\n                </div>\n              </transition>\n            </div>\n          </div>\n        </transition-group>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { Progress } from \"element-ui\";\nimport { compressedImg, preLoadImg } from \"../../../utils/img\";\nimport { generateUUID } from \"../../../utils/tools\";\nimport { isFile, isBlod } from \"../../../utils/type\";\nimport { warn } from \"../../../utils/log\";\nimport { ossUpload } from \"../../../utils/aliOss\";\n\nexport default {\n  name: \"CcUploader\",\n  components: {\n    Progress\n  },\n  props: {\n    text: {\n      type: String,\n      default: \"\"\n    },\n    width: {\n      type: [Number, String],\n      default: 100\n    },\n    list: {\n      type: Array,\n      default: () => []\n    },\n    accept: {\n      type: String,\n      default: \".jpg,.jpeg,.png\"\n    },\n    limit: {\n      type: Number,\n      default: 6\n    },\n    ossOpts: {\n      type: Object,\n      default: null\n    },\n    beforeUpload: {\n      type: Function,\n      default: () => true\n    },\n    beforeRemove: {\n      type: Function,\n      default: () => true\n    },\n    onPreview: {\n      type: Function,\n      default: () => {}\n    },\n    onSuccess: {\n      type: Function,\n      default: () => {}\n    },\n    onError: {\n      type: Function,\n      default: () => {}\n    }\n  },\n  data() {\n    return {\n      fileList: []\n    };\n  },\n  created() {\n    this.init();\n  },\n  computed: {\n    style() {\n      return {\n        width: `${this.width}px`,\n        height: `${this.width}px`\n      };\n    }\n  },\n  methods: {\n    init() {\n      this.fileList = this.list.map(_ => ({\n        uuid: generateUUID(),\n        percentage: 100,\n        url: _\n      }));\n    },\n    async remove(index) {\n      const canRemove = await this.beforeRemove(\n        {\n          ...this.fileList[index]\n        },\n        index\n      );\n      if (!canRemove) return;\n      this.fileList.splice(index, 1);\n    },\n    preview(index) {\n      const result = this.fileList[index];\n      this.onPreview({ ...result }, index);\n    },\n    async handlerBeforeUpload(file) {\n      try {\n        const result = await this.beforeUpload(file);\n        if (isFile(result)) {\n          return result;\n        }\n        warn(\"beforeUpload 返回的结果不是一个有效的file对象\");\n        return false;\n      } catch (err) {\n        warn(`beforeUolader ${err}`);\n        return false;\n      }\n    },\n    async handlerUpload(e) {\n      const files = e.target.files;\n      const file = files[0];\n      e.target.value = \"\";\n      const fileBeforeUpload = await this.handlerBeforeUpload(file);\n      if (!fileBeforeUpload) return;\n      if (!this.ossOpts) return;\n      const uuid = generateUUID();\n      this.fileList = [\n        ...this.fileList,\n        {\n          uuid,\n          url: \"\",\n          percentage: 0\n        }\n      ];\n      await this.$nextTick();\n      const result = await ossUpload(\n        fileBeforeUpload,\n        this.ossOpts,\n        progressEvent => {\n          const complete =\n            ((progressEvent.loaded / progressEvent.total) * 60) | 0;\n          this.fileList[this.fileList.length - 1].percentage = complete;\n        }\n      );\n      if (result.err) {\n        this.onError(result.err, fileBeforeUpload);\n        setTimeout(() => {\n          this.fileList.pop();\n        }, 2000);\n        return;\n      }\n      const timer = setInterval(() => {\n        if (this.fileList[this.fileList.length - 1].percentage >= 95) {\n          clearInterval(timer);\n          return;\n        }\n        this.fileList[this.fileList.length - 1].percentage =\n          this.fileList[this.fileList.length - 1].percentage + 1;\n      }, 500);\n      preLoadImg(result.url, () => {\n        clearInterval(timer);\n        this.fileList[this.fileList.length - 1].url = result.url;\n        this.fileList[this.fileList.length - 1].percentage = 100;\n        this.onSuccess(result.url, fileBeforeUpload);\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n@import \"../../../assets/css/rest.css\";\n.cc-uploader-warpper {\n  display: flex;\n  flex-wrap: nowrap;\n  background: #fff;\n  overflow: hidden;\n  position: relative;\n  .cc-file-uploader-warpper {\n    // width: 100px;\n    // height: 100px;\n    border-radius: 5px;\n    border: 1px dashed #c0ccda;\n    &:hover {\n      border: 1px dashed skyblue;\n    }\n    .cc-file-uploader {\n      position: absolute;\n      cursor: pointer;\n      opacity: 0;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    .cc-upload {\n      color: #8c939d;\n      font-size: 30px;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n  .cc-file-list-warpper {\n    display: flex;\n    flex-wrap: nowrap;\n    transition: 0.3s;\n    .cc-file-list-item-warpper {\n      transition: 0.3s;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      overflow: hidden;\n    }\n    .cc-file-list-item {\n      margin-right: 10px;\n      transition: 0.3s;\n      .cc-file-list-item-img-warpper {\n        border: 1px solid #d9d9d9;\n        padding: 5px;\n        border-radius: 5px;\n        // width: 100px;\n        // height: 100px;\n        position: relative;\n        overflow: hidden;\n        &:hover {\n          .cc-file-action-warpper {\n            display: flex;\n          }\n        }\n        .cc-file-action-warpper {\n          .el-icon-view,\n          .el-icon-delete {\n            cursor: pointer;\n          }\n          padding: 10px;\n          z-index: 10;\n          color: #fff;\n          align-items: center;\n          justify-content: space-around;\n          display: none;\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          background: rgba(0, 0, 0, 0.5);\n          transform: translateX(-50%) translateY(-50%);\n          top: 50%;\n          left: 50%;\n        }\n        img {\n          width: 100%;\n          height: 100%;\n          transition: 0.5s;\n        }\n        .progress-warpper {\n          width: 100%;\n          height: 100%;\n          transition: 0.8s;\n        }\n      }\n    }\n  }\n}\n.fade-enter,\n.fade-leave-to {\n  position: absolute;\n  transform: scale(0);\n  opacity: 0;\n}\n\n.list-complete-enter {\n  transform: translateX(200%) scale(0);\n  opacity: 0;\n}\n.list-complete-leave-to {\n  transition: all 0.3s ease;\n  opacity: 0;\n  transform: scale(0);\n  left: -100%;\n}\n.list-complete-leave-active {\n  position: absolute;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./uploader.vue?vue&type=template&id=502db7bd&scoped=true&\"\nimport script from \"./uploader.vue?vue&type=script&lang=js&\"\nexport * from \"./uploader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uploader.vue?vue&type=style&index=0&id=502db7bd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"502db7bd\",\n  null\n  \n)\n\nexport default component.exports","import CcUploader from \"./src/uploader\";\n\n/* istanbul ignore next */\nCcUploader.install = function(Vue) {\n  Vue.component(CcUploader.name, CcUploader);\n};\n\nexport default CcUploader;\n"],"sourceRoot":""}